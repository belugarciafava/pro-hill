ALTER TABLE policies.endorsement
  DROP FOREIGN KEY PERIOD_FK,
  DROP INDEX PERIOD_FK;

ALTER TABLE policies.endorsement
  CHANGE COLUMN DETAIL CAUSE VARCHAR(255) DEFAULT NULL ,
  CHANGE COLUMN ENDORSEMENT_TYPE ENDORSEMENT_TYPE VARCHAR(50) DEFAULT NULL ,
  ADD COLUMN POLICY_ID VARCHAR(255) DEFAULT NULL ,
  ADD COLUMN EFFECTIVE_DATE DATETIME DEFAULT NULL AFTER POLICY_ID,
  ADD COLUMN REQUESTED_BY VARCHAR(255) DEFAULT NULL AFTER EFFECTIVE_DATE;

ALTER TABLE policies.endorsement
  ADD CONSTRAINT ENDORSEMENT_POLICY_FK
    FOREIGN KEY (POLICY_ID)
    REFERENCES policies.policy (ID),
    ADD INDEX ENDORSEMENT_POLICY_FK (POLICY_ID ASC);

CREATE TABLE policies.endorsement_coverage (
  ID varchar(50) NOT NULL,
  NAME varchar(255) DEFAULT NULL,
  SEGMENT varchar(50) DEFAULT NULL,
  ENDORSEMENT_ID varchar(255) DEFAULT NULL,
  CODE varchar(50) NOT NULL,
  PRIMARY KEY (ID),
  KEY COVERAGE_ENDORSEMENT_FK_idx (ENDORSEMENT_ID),
  CONSTRAINT COVERAGE_ENDORSEMENT_FK FOREIGN KEY (ENDORSEMENT_ID) REFERENCES endorsement (ID)
);

CREATE TABLE policies.endorsement_charge (
  TYPE varchar(255) DEFAULT NULL,
  AMOUNT double DEFAULT NULL,
  ID varchar(255) NOT NULL,
  ENDORSEMENT_COVERAGE_ID varchar(255) NOT NULL,
  PRIMARY KEY (ID),
  KEY ENDORSEMENT_COVERAGE_CHARGE_FK_idx (ENDORSEMENT_COVERAGE_ID),
  CONSTRAINT ENDORSEMENT_COVERAGE_CHARGE_FK FOREIGN KEY (ENDORSEMENT_COVERAGE_ID) REFERENCES endorsement_coverage (ID)
);